{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 7,
  "summary": "Build a web app that recreates a two-page checklist document as a fillable digital form (same section order/layout), generates a simplified PDF on submission, allows PDF download, and automatically uploads the PDF to a shared Dropbox account using an admin-provided access token with the filename based on selected room number.",
  "architectural_notes": [
    "Dropbox uploads use a single shared Dropbox account configured by an admin via an access token stored in app settings.",
    "On form submission: generate a simplified PDF, name it using the selected room number, upload to Dropbox, and provide a download option."
  ],
  "known_issues": [
    "PDF download works on desktop but fails on mobile (\"page failed to load\"/error when downloading on phone).",
    "App stuck on infinite \"Loading...\" screen and does not load at all (no error message) on both desktop and mobile, even when using the latest Caffeine draft link."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-create-a-two-page-fillable-digital-form-that-recreates-the-uploaded-courtesy-safety-health-inspection-checklist-in-the-same-section-order-as-the-photos-including-all-fields-shown-across-both-uploaded-images",
      "title": "Create a two-page fillable digital form that recreates the uploaded “Courtesy Safety & Health Inspection Checklist” in the same section order as the photos, including all fields shown across both uploaded images.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-required-room-number-selection-input-that-is-used-as-the-pdf-filename-for-both-download-and-dropbox-upload-when-a-submission-is-completed",
      "title": "Add a required “Room Number” selection/input that is used as the PDF filename for both download and Dropbox upload when a submission is completed.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-on-form-submission-generate-a-simplified-pdf-representation-of-the-submitted-checklist-data-and-provide-an-immediate-pdf-download-to-the-user",
      "title": "On form submission, generate a simplified PDF representation of the submitted checklist data and provide an immediate PDF download to the user.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-an-admin-settings-page-where-an-admin-can-paste-and-save-a-dropbox-access-token-that-will-be-used-for-all-uploads-to-a-single-shared-dropbox-account",
      "title": "Implement an admin settings page where an admin can paste and save a Dropbox access token that will be used for all uploads to a single shared Dropbox account.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-automatically-upload-the-generated-pdf-to-dropbox-upon-successful-form-submission-using-the-admin-provided-access-token-storing-the-file-in-the-shared-dropbox-account-with-the-filename-based-on-room-number",
      "title": "Automatically upload the generated PDF to Dropbox upon successful form submission using the admin-provided access token, storing the file in the shared Dropbox account with the filename based on Room Number.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-coherent-distinct-visual-theme-for-the-app-and-apply-it-consistently-across-pages-and-components-without-using-a-blue-purple-primary-palette",
      "title": "Create a coherent, distinct visual theme for the app and apply it consistently across pages and components (without using a blue/purple primary palette).",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-pdf-download-flow-so-that-downloading-the-generated-pdf-works-reliably-on-mobile-browsers-especially-ios-safari-where-the-current-download-action-can-fail-with-a-page-load-error",
      "title": "Fix the PDF download flow so that downloading the generated PDF works reliably on mobile browsers (especially iOS Safari) where the current download action can fail with a page load error.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-there-is-a-visible-clickable-button-in-the-main-ui-that-navigates-to-the-admin-settings-page-admin-so-an-admin-can-access-the-dropbox-token-settings-from-the-app-without-manually-typing-the-url",
      "title": "Ensure there is a visible, clickable button in the main UI that navigates to the Admin Settings page (/admin) so an admin can access the Dropbox token settings from the app without manually typing the URL.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-the-nested-react-query-provider-so-the-app-uses-a-single-queryclientprovider-the-one-already-wrapping-the-app-in-frontend-src-main-tsx-and-ensure-all-hooks-components-use-that-single-provider-instance",
      "title": "Remove the nested React Query provider so the app uses a single QueryClientProvider (the one already wrapping the app in frontend/src/main.tsx), and ensure all hooks/components use that single provider instance.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-initial-app-loading-state-fail-safe-if-internet-identity-initialization-remains-in-the-initializing-state-longer-than-a-reasonable-timeout-e-g-8-10-seconds-stop-blocking-the-entire-ui-and-render-the-main-app-with-anonymous-access-while-showing-a-clear-dismissible-warning-banner-that-authentication-initialization-is-taking-longer-than-expected",
      "title": "Make the initial app loading state fail-safe: if Internet Identity initialization remains in the \"initializing\" state longer than a reasonable timeout (e.g., 8–10 seconds), stop blocking the entire UI and render the main app with anonymous access, while showing a clear, dismissible warning banner that authentication initialization is taking longer than expected.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-non-blocking-error-ui-path-for-authentication-initialization-failures-when-the-internet-identity-hook-reports-a-login-initialization-error-render-the-app-do-not-block-on-a-full-page-loader-and-show-a-visible-error-message-with-a-reload-action",
      "title": "Add a non-blocking error UI path for authentication initialization failures: when the Internet Identity hook reports a login/initialization error, render the app (do not block on a full-page loader) and show a visible error message with a \"Reload\" action.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Recreate the checklist as a fillable digital form including both uploaded pages, preserving the same section/order layout",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Generate a simplified PDF from a submitted form and allow the user to download the PDF",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Dropbox integration: admin settings page to paste a Dropbox access token (single shared account) and auto-upload submitted PDFs named by selected room number",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Add basic admin protection for the Dropbox token settings so only an admin identity can set/replace the token.",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Add a button in the main UI that the user can press to access/open the admin section (admin settings).",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Digital inspection checklist form with PDF export and shared Dropbox upload",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}